import{j as e,L as G,k as L,B as J,h as K,r as i,ca as b,o as r,ay as Y,bk as Z,az as _,ae as k,af as l,W as c,E as N,cb as S,cc as ee,aj as F,ak as P,al as D,ai as se,cd as ae,ce as re,aX as te}from"./index.b8b13c58.js";import{R as ne}from"./react-paginate.01b13c4d.js";import{Q as ie}from"./react-dataTable-component.6baf3208.js";import{u as le,C as j}from"./index.esm.9d4e4ccc.js";import{a as oe,a9 as ce,a2 as me,m as de}from"./App.e1b9a34b.js";import"./emotion-memoize.esm.06f0e458.js";const pe={support:"light-info",user:"light-success",manager:"light-warning",administrator:"light-primary","restricted-user":"light-danger"},he=[{name:"Name",sortable:!0,minWidth:"350px",cell:({name:a})=>a,selector:a=>a.name},{sortable:!0,minWidth:"350px",name:"Assigned To",cell:({assignedTo:a})=>a?a.map((t,m)=>{const d=a[a.length-1]===m;return e(G,{to:"/apps/user/list",className:L({"me-50":!d}),children:e(J,{pill:!0,color:pe[t],className:"text-capitalize",children:t.replace("-"," ")})},`${t}-${m}`)}):null},{sortable:!0,minWidth:"350px",name:"Created Date",selector:a=>a.createdDate,cell:({createdDate:a})=>a,sortFunction:(a,t)=>new Date(t.createdDate)-new Date(a.createdDate)}],ue=({role:a,setShow:t,searchTerm:m,rowsPerPage:d,handlePerPage:y,handleFilter:x,handleAssignedToChange:v})=>r(k,{className:"text-nowrap w-100 my-75 g-0 permission-header",children:[e(l,{xs:12,lg:4,className:"d-flex align-items-center",children:r("div",{className:"d-flex align-items-center justify-content-center justify-content-lg-start",children:[e("label",{htmlFor:"rows-per-page",children:"Show"}),r(c,{className:"mx-50",type:"select",id:"rows-per-page",value:d,onChange:y,style:{width:"5rem"},children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"})]}),e("label",{htmlFor:"rows-per-page",children:"Entries"})]})}),e(l,{xs:12,lg:8,children:r("div",{className:"d-flex align-items-center justify-content-lg-end justify-content-start flex-md-nowrap flex-wrap mt-lg-0 mt-1",children:[r("div",{className:"d-flex align-items-center me-1",children:[e("label",{className:"mb-0",htmlFor:"search-permission",children:"Search:"}),e(c,{type:"text",value:m,id:"search-permission",className:"ms-50 w-100",onChange:n=>x(n.target.value)})]}),e("div",{className:"mt-50 width-200 me-1 mt-sm-0 mt-1",children:r(c,{type:"select",name:"select",value:a,onChange:n=>v(n.target.value),children:[e("option",{value:"",children:"Select Role"}),e("option",{value:"administrator",children:"Administrator"}),e("option",{value:"manager",children:"Manager"}),e("option",{value:"user",children:"User"}),e("option",{value:"support",children:"Support"}),e("option",{value:"restricted-user",children:"Restricted User"})]})}),e(N,{className:"add-permission mt-sm-0 mt-1",color:"primary",onClick:()=>t(!0),children:"Add Permission"})]})})]}),ge=()=>{const a=oe(),t=K(s=>s.permissions),{reset:m,control:d,setError:y,setValue:x,handleSubmit:v,formState:{errors:n}}=le({defaultValues:{permissionName:""}}),[C,p]=i.exports.useState(!1),[f,T]=i.exports.useState(""),[h,E]=i.exports.useState(""),[u,A]=i.exports.useState(1),[o,B]=i.exports.useState(10);i.exports.useEffect(()=>{a(b({assignedTo:f,q:h,page:u,perPage:o}))},[a,t.data.length]);const q=s=>{a(b({assignedTo:f,q:h,perPage:o,page:s.selected+1})),A(s.selected+1)},M=s=>{const g=parseInt(s.currentTarget.value);a(b({assignedTo:f,q:h,perPage:g,page:u})),B(g)},R=s=>{E(s),a(b({q:s,assignedTo:f,page:u,perPage:o}))},H=s=>{T(s),a(b({q:h,assignedTo:s,page:u,perPage:o}))},W=()=>{const s=Number(Math.ceil(t.total/o));return e(ne,{previousLabel:"",nextLabel:"",pageCount:s||1,activeClassName:"active",forcePage:u!==0?u-1:0,onPageChange:g=>q(g),pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},$=()=>{const s={q:h},g=Object.keys(s).some(function(X){return s[X].length>0});return t.data.length>0?t.data:t.data.length===0&&g?[]:t.allData.slice(0,o)},z=s=>{a(S(s)),x("permissionName",s.name),p(!0)},I=()=>{a(S(null)),x("permissionName","")},w=s=>{s.permissionName.length?(t.selected!==null?a(ae({name:s.permissionName,id:t.selected.id})):a(re({name:s.permissionName})),p(!1)):y("permissionName",{type:"manual"})},U=[...he,{name:"Actions",cell:s=>r("div",{className:"d-flex align-items-center permissions-actions",children:[e(N,{size:"sm",color:"transparent",className:"btn btn-icon",onClick:()=>z(s),children:e(me,{className:"font-medium-2"})}),e(N,{size:"sm",color:"transparent",className:"btn btn-icon",onClick:()=>a(ee(s.id)),children:e(de,{className:"font-medium-2"})})]})}],O=()=>{m(),p(!1)},Q=()=>t.selected!==null?"Edit permission as per your requirements.":"Permissions you may use and assign to your users.",V=()=>t.selected===null?r(k,{tag:F,onSubmit:v(w),children:[r(l,{xs:12,children:[e(P,{className:"form-label",for:"permission-name",children:"Permission Name"}),e(j,{control:d,id:"permissionName",name:"permissionName",render:({field:s})=>e(c,{placeholder:"Permission Name",invalid:n.permissionName&&!0,...s})}),n&&n.permissionName&&e(D,{children:"Please enter a valid Permission Name"})]}),e(l,{xs:12,className:"mt-75",children:r("div",{className:"form-check",children:[e(c,{type:"checkbox",id:"core-perm-checkbox"}),e(P,{className:"form-check-label",for:"core-perm-checkbox",children:"Set as core permission"})]})}),r(l,{xs:12,className:"text-center mt-2",children:[e(N,{className:"me-1",color:"primary",children:"Create Permission"}),e(N,{outline:!0,type:"reset",onClick:O,children:"Discard"})]})]}):r(i.exports.Fragment,{children:[r(se,{color:"warning",children:[e("h6",{className:"alert-heading",children:"Warning!"}),e("div",{className:"alert-body",children:"By editing the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding."})]}),r(k,{tag:F,onSubmit:v(w),children:[r(l,{xs:12,sm:9,children:[e(P,{className:"form-label",for:"permission-name",children:"Permission Name"}),e(j,{control:d,id:"permissionName",name:"permissionName",render:({field:s})=>e(c,{placeholder:"Permission Name",invalid:n.permissionName&&!0,...s})}),n&&n.permissionName&&e(D,{children:"Please enter a valid Permission Name"})]}),e(l,{xs:12,sm:3,className:"p-sm-0",children:e(N,{className:"mt-2",color:"primary",children:"Update"})}),e(l,{xs:12,className:"mt-75",children:r("div",{className:"form-check",children:[e(c,{type:"checkbox",id:"core-perm-checkbox"}),e(P,{className:"form-check-label",for:"core-perm-checkbox",children:"Set as core permission"})]})})]})]});return r(i.exports.Fragment,{children:[e("div",{className:"react-dataTable",children:e(ie,{noHeader:!0,pagination:!0,subHeader:!0,responsive:!0,paginationServer:!0,columns:U,sortIcon:e(ce,{}),className:"react-dataTable",paginationComponent:W,data:$(),subHeaderComponent:e(ue,{setShow:p,assignedTo:f,searchTerm:h,rowsPerPage:o,handleFilter:R,handlePerPage:M,handleAssignedToChange:H})})}),r(Y,{isOpen:C,onClosed:I,toggle:()=>p(!C),className:"modal-dialog-centered",children:[e(Z,{className:"bg-transparent",toggle:()=>p(!C)}),r(_,{className:L({"p-3 pt-0":t.selected!==null,"px-sm-5 pb-5":t.selected===null}),children:[r("div",{className:"text-center mb-2",children:[r("h1",{className:"mb-1",children:[t.selected!==null?"Edit":"Add New"," Permission"]}),e("p",{children:Q()})]}),V()]})]})]})},ye=()=>r(i.exports.Fragment,{children:[e("h3",{children:"Permissions List"}),e("p",{children:"Each category (Basic, Professional, and Business) includes the four predefined roles shown below."}),e(te,{children:e("div",{className:"card-datatable app-user-list table-responsive",children:e(ge,{})})})]});export{ye as default};
