import{r as h,j as e,ay as le,o as l,aj as te,az as re,ak as w,W as D,al as ne,E as S,T as ie,aA as M,aB as F,aC as U,aD as G,G as oe,B as q,b9 as W,ba as de,aX as ce,aY as me,k as he,U as ue,D as be,t as pe,v as K,bb as ge,bc as fe,bd as Y,be as ke,bf as ve,bg as Te,h as Ne,bh as Ce,bi as Se,bj as ye}from"./index.b8b13c58.js";import{u as L,C as j}from"./index.esm.9d4e4ccc.js";import{F as xe}from"./index.0477f76b.js";import{u as Ae}from"./file-uploader.c0e791da.js";import{S as E,c as J}from"./react-select.esm.68638e53.js";import{a as O,X as Be,P as we,v as V,Z as De,k as Ie,x as Fe,d as Oe,h as Re,t as Z}from"./App.e1b9a34b.js";/* empty css                  */import{R as $e}from"./index.16c0f1b3.js";import{A as ze}from"./index.b09f352c.js";import"./tslib.578318e6.js";import"./emotion-memoize.esm.06f0e458.js";const Le=[{value:"Pheobe Buffay",label:"Pheobe Buffay",img:ie},{value:"Chandler Bing",label:"Chandler Bing",img:M},{value:"Ross Geller",label:"Ross Geller",img:F},{value:"Monica Geller",label:"Monica Geller",img:U},{value:"Joey Tribbiani",label:"Joey Tribbiani",img:G},{value:"Rachel Green",label:"Rachel Green",img:oe},{value:"Jerry Seinfeld",label:"Jerry Seinfeld",img:F},{value:"Jerry Seinfeld",label:"Jerry Seinfeld",img:F},{value:"Astro Kramer",label:"Astro Kramer",img:M},{value:"George Costanza",label:"George Costanza",img:G},{value:"Charlie Kelly",label:"Charlie Kelly",img:U},{value:"Dennis Reynolds",label:"Dennis Reynolds",img:F}],je=[{value:"UX",label:"UX"},{value:"App",label:"App"},{value:"Forms",label:"Forms"},{value:"Images",label:"Images"},{value:"Code Review",label:"Code Review"},{value:"Charts & Maps",label:"Charts & Maps"}],Pe=v=>{const{sidebarOpen:a,labelColors:T,selectedTask:r,handleTaskSidebarToggle:u}=v,[m,b]=h.exports.useState(""),[o,c]=h.exports.useState([]),[p,i]=h.exports.useState([]),[f,g]=h.exports.useState(new Date),[N,k]=h.exports.useState(null),y=O(),{getRootProps:d,getInputProps:C}=Ae({multiple:!1,onDrop:s=>{c([...s.map(n=>Object.assign(n))])}}),{control:A,setError:R,setValue:B,clearErrors:$,handleSubmit:z,formState:{errors:t}}=L({defaultValues:{title:""}}),x=({data:s,...n})=>e(J.Option,{...n,children:e(q,{color:`light-${T[s.label]}`,children:s.label})}),H=({data:s,...n})=>e(J.Option,{...n,children:l("div",{className:"d-flex align-items-center",children:[e("img",{className:"d-block rounded-circle me-50",src:s.img,height:"26",width:"26",alt:s.label}),e("p",{className:"mb-0",children:s.label})]})}),Q=()=>{if(!Ie(r)){if(B("title",r.title),g(r.dueDate),b(r.description),r.coverImage&&c([r.coverImage]),r.assignedTo.length){const s=[];r.assignedTo.map(n=>{s.push({value:n.title,label:n.title,img:n.img})}),k(s)}if(r.labels.length){const s=[];r.labels.map(n=>{s.push({value:n,label:n})}),i(s)}}},_=()=>{b(""),c([]),i([]),B("title",""),g(new Date),$(),y(W({})),k(null)},ee=s=>{if(s.title.length){const n=[],P=[];s.assignedTo&&N.length&&N.map(I=>{P.push({title:I.label,img:I.img})}),p.length&&p.map(I=>{n.push(I.label)}),y(de({...r,...s,dueDate:f,labels:n,description:m,assignedTo:P,...o.length&&typeof o[0]!="string"?{coverImage:URL.createObjectURL(o[0])}:{}})),u()}else R("title")},ae=()=>{if(o.length&&typeof o[0]!="string")return o.map(s=>e("img",{alt:s.name,className:"single-file-image img-fluid",src:URL.createObjectURL(s)},s.name));if(typeof o[0]=="string")return e("img",{alt:"task-img",className:"single-file-image img-fluid",src:o[0]})},se=()=>{if(b(""),B("title",store.selectedTask.title),g(store.selectedTask.dueDate),r.assignedTo.length){const s=[];r.assignedTo.map(n=>{s.push({value:n.title,label:n.title,img:n.img})}),k(s)}if(r.labels.length){const s=[];r.labels.map(n=>{s.push({value:n,label:n})}),i(s)}r.coverImage?c([r.coverImage]):c([])};return e(le,{isOpen:a,className:"sidebar-lg",contentClassName:"p-0",onOpened:Q,onClosed:_,toggle:u,modalClassName:"modal-slide-in sidebar-kanban-modal",children:l(te,{id:"form-modal-kanban",className:"kanban-task-modal",onSubmit:z(ee),children:[l("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[e("h5",{className:"modal-title",children:"Update Task"}),e(Be,{className:"fw-normal mt-25",size:16,onClick:u})]}),e(we,{options:{wheelPropagation:!1},children:l(re,{className:"flex-grow-1 pb-sm-0 pb-3",children:[l("div",{className:"mb-1",children:[l(w,{className:"form-label",for:"task-title",children:["Title ",e("span",{className:"text-danger",children:"*"})]}),e(j,{name:"title",control:A,render:({field:s})=>e(D,{id:"task-title",placeholder:"Title",className:"new-todo-item-title",invalid:t.title&&!0,...s})}),t.title&&e(ne,{children:"Please enter a valid task title"})]}),l("div",{className:"mb-1",children:[e(w,{className:"form-label",for:"due-date",children:"Due Date"}),e(xe,{id:"due-date",name:"due-date",value:f,className:"form-control",options:{dateFormat:"Y-m-d"},onChange:s=>g(s[0])})]}),l("div",{className:"mb-1",children:[e(w,{className:"form-label",for:"task-labels",children:"Labels"}),e(E,{isMulti:!0,value:p,id:"task-labels",isClearable:!1,options:je,className:"react-select",classNamePrefix:"select",theme:V,components:{Option:x},onChange:s=>{i(s!==null?[...s]:[])}})]}),l("div",{className:"mb-1",children:[e(w,{className:"form-label",for:"task-assignee",children:"Assignee"}),e(E,{isMulti:!0,id:"task-assignee",value:N,isClearable:!1,className:"react-select",classNamePrefix:"select",options:Le,theme:V,onChange:s=>k(s),components:{Option:H}})]}),e("div",{className:"mb-1",children:l("div",{...d({className:"dropzone"}),children:[e("input",{...C()}),l("div",{className:"d-flex align-items-center justify-content-center flex-column text-center",children:[e(De,{size:64}),e("h5",{children:"Drop Files here or click to upload"})]}),o.length?ae():null]})}),l("div",{className:"mb-1",children:[e(w,{className:"form-label",for:"task-desc",children:"Description"}),e(D,{type:"textarea",value:m,name:"text",id:"task-desc",rows:"3",placeholder:"Description...",onChange:s=>b(s.target.value)})]}),l("div",{children:[e(S,{type:"submit",color:"primary",className:"me-1",children:"Update"}),e(S,{outline:!0,color:"secondary",onClick:se,children:"Reset"})]})]})})]})})},Me=v=>{const{task:a,labelColors:T,handleTaskSidebarToggle:r}=v,u=O(),m=()=>{u(W(a)),r()},b=()=>a.labels.length?e("div",{className:"mb-1",children:a.labels.map((i,f)=>{const g=a.labels[a.labels.length-1]===i;return e(q,{pill:!0,label:i,color:`light-${T[i]}`,className:he({"me-75":!g}),children:i},f)})}):null,o=()=>a.attachments&&a.attachments.length||a.comments&&a.comments.length?l("div",{className:"d-flex align-items-center",children:[a.attachments&&a.attachments.length?l("div",{className:"d-flex align-items-center cursor-pointer me-75",children:[e(Fe,{size:16,className:"me-25"}),e("span",{children:a.attachments.length})]}):null,a.comments&&a.comments.length?l("div",{className:"d-flex align-items-center cursor-pointer",children:[e(Oe,{size:16,className:"me-50"}),e("span",{children:a.comments.length})]}):null]}):null,c=()=>a.comments&&!a.comments.length&&a.attachments&&!a.attachments.length?"justify-content-end":"justify-content-between",p=()=>a.attachments&&a.attachments.length||a.comments&&a.comments.length||a.assignedTo&&a.assignedTo.length?l("div",{className:`task-footer d-flex align-items-center mt-1 ${c()}`,children:[o(),a.assignedTo.length?e("div",{children:a.assignedTo.length?e(ze,{data:a.assignedTo}):null}):null]}):null;return e(ce,{onClick:m,className:"task","data-board-id":a.boardId,"data-task-id":a.id,children:l(me,{"data-task-id":a.id,children:[b(),a.coverImage?e("img",{className:"img-fluid rounded task-img mb-1",alt:a.title,src:a.coverImage}):null,e("span",{className:"task-title",children:a.title}),p()]})})},Ue={taskTitle:""},Ge=v=>{const{board:a,index:T,store:r,labelColors:u,handleTaskSidebarToggle:m}=v,[b,o]=h.exports.useState(""),[c,p]=h.exports.useState(null),i=O(),{reset:f,control:g,handleSubmit:N,formState:{errors:k}}=L({defaultValues:Ue});h.exports.useEffect(()=>{o(a.title)},[a.title]);const y=()=>{f(),p(null)},d=()=>{f(),p(a.id)},C=()=>{i(ge(a.id))},A=()=>{i(fe(a.id))},R=t=>{i(Te({title:t.taskTitle,boardId:a.id})),y()},B=()=>a.id===c?l("form",{onSubmit:N(R),children:[l("div",{className:"mb-1",children:[e(j,{name:"taskTitle",control:g,rules:{required:!0},render:({field:{value:t,onChange:x}})=>e(D,{autoFocus:!0,rows:"2",value:t,type:"textarea",id:"task-title",onChange:x,placeholder:"Add Content",invalid:k.taskTitle&&!0,"aria-describedby":"validation-add-task"})}),k.taskTitle&&e(Y,{color:"danger",id:"validation-add-task",children:"Please enter a valid Task Title"})]}),l("div",{children:[e(S,{color:"primary",size:"sm",type:"submit",className:"me-75",children:"Add"}),e(S,{outline:!0,size:"sm",color:"secondary",onClick:y,children:"Cancel"})]})]}):null,$=t=>{t.from.classList[1]===t.to.classList[1]&&i(ke({taskId:t.item.dataset.taskId,targetTaskId:t.originalEvent.target.dataset.taskId}))},z=t=>{i(ve({taskId:t.item.dataset.taskId,boardId:t.item.dataset.boardId,newBoardId:t.to.classList[1].replace("board-","")}))};return e(h.exports.Fragment,{children:l("div",{className:"board-wrapper",children:[l("div",{className:"d-flex align-items-center justify-content-between",children:[e("div",{className:"d-flex align-items-center board-header",children:e(D,{className:"board-title",value:b,onChange:t=>o(t.target.value)})}),l(ue,{className:"more-options-dropdown",children:[e(be,{className:"btn-icon",color:"transparent",size:"sm",children:e(Re,{size:20})}),l(pe,{end:!0,children:[e(K,{href:"/",onClick:t=>{t.preventDefault(),C()},children:"Clear Tasks"}),e(K,{href:"/",onClick:t=>{t.preventDefault(),A()},children:"Delete Board"})]})]})]}),l("div",{children:[e($e,{list:r.tasks,group:"shared-group",setList:()=>null,onChange:$,onAdd:z,className:`tasks-wrapper board-${a.id}`,children:r.tasks.map((t,x)=>t.boardId===a.id?e(Me,{task:t,index:x,labelColors:u,handleTaskSidebarToggle:m},`${t.boardId}-${x}`):e(h.exports.Fragment,{},`${t.boardId}-${x}`))}),c===null||c!==null&&c!==a.id?l(S,{size:"sm",color:"flat-secondary",onClick:d,children:[e(Z,{size:14,className:"me-25"}),e("span",{className:"align-middle",children:"Add New Task"})]}):B()]})]})},T)};const Ke={boardTitle:""},X={App:"info",UX:"success",Images:"warning",Forms:"success","Code Review":"danger","Charts & Maps":"primary"},ea=()=>{const[v,a]=h.exports.useState(!1),[T,r]=h.exports.useState(!1),u=O(),m=Ne(d=>d.kanban),{reset:b,control:o,handleSubmit:c,formState:{errors:p}}=L({defaultValues:Ke}),i=()=>{b(),r(!1)},f=()=>{b(),r(!0)},g=d=>{u(ye({title:d.boardTitle,id:d.boardTitle.toLowerCase().replace(/ /g,"-")})),i()},N=()=>a(!v),k=()=>m.boards.map((d,C)=>{const A=m.boards[m.boards.length-1].id===d.id;return e(Ge,{store:m,board:d,labelColors:X,isLastBoard:A,index:`${d.id}-${C}`,handleTaskSidebarToggle:N},`${d.id}-${C}`)}),y=()=>T?l("form",{onSubmit:c(g),children:[l("div",{className:"mb-50",children:[e(j,{name:"boardTitle",control:o,rules:{required:!0},render:({field:{value:d,onChange:C}})=>e(D,{autoFocus:!0,value:d,id:"board-title",onChange:C,placeholder:"Board Title",invalid:Boolean(p.boardTitle),"aria-describedby":"validation-add-board"})}),p.boardTitle&&e(Y,{color:"danger",id:"validation-add-board",children:"Please enter a valid Board Title"})]}),l("div",{children:[e(S,{color:"primary",size:"sm",type:"submit",className:"me-75",children:"Add"}),e(S,{outline:!0,size:"sm",color:"secondary",onClick:i,children:"Cancel"})]})]}):null;return h.exports.useEffect(()=>{u(Ce()),u(Se())},[u]),m.boards?l("div",{className:"app-kanban-wrapper",children:[k(),e("div",{className:"ms-1",style:{minWidth:150},children:T?y():l(S,{size:"sm",color:"light-secondary",onClick:f,children:[e(Z,{size:14,className:"me-25"}),e("span",{className:"align-middle",children:" Add Board"})]})}),e(Pe,{labelColors:X,sidebarOpen:v,selectedTask:m.selectedTask,handleTaskSidebarToggle:N})]}):null};export{ea as default};
