import{o as t,j as e,aq as he,ar as ge,W,U as be,D as ke,t as fe,v as I,L as b,k as R,B as Ne,E as z,aw as H,ax as x,r as g,T as G,ay as ve,aj as Te,az as Ce,ak as O,al as Se,aA as xe,aB as we,aC as ye,aD as De,G as Ae,h as Fe,aE as Me,aF as $,aG as V,aH as _,aI as Be,aJ as ze,aK as Ie}from"./index.b8b13c58.js";import{e as Oe,S as Pe,h as J,P as X,A as U,M as Re,q as Y,s as Ee,m as ee,t as je,v as Q,k as D,X as Le,a as Ge}from"./App.e1b9a34b.js";import{R as $e}from"./index.16c0f1b3.js";import{F as Ue}from"./index.0477f76b.js";import{D as A,r as We}from"./editor.b3a2e00c.js";import{S as Z,c as qe}from"./react-select.esm.68638e53.js";import{u as He,C as Ve}from"./index.esm.9d4e4ccc.js";/* empty css                  */import"./emotion-memoize.esm.06f0e458.js";const _e="/assets/avatar-blank.a991450c.png",Je=p=>{const{query:v,tasks:n,params:s,setSort:u,dispatch:h,getTasks:r,setQuery:N,updateTask:d,selectTask:i,reOrderTasks:o,handleTaskSidebar:m,handleMainSidebar:T}=p,w=a=>{h(i(a)),m()},C=a=>a.includes("high")?"light-primary":a.includes("medium")?"light-warning":a.includes("low")?"light-success":a.includes("update")?"light-danger":a.includes("team")?"light-info":"light-primary",F=a=>{const c={team:"light-primary",low:"light-success",medium:"light-warning",high:"light-danger",update:"light-info"};return a.map(k=>e(Ne,{className:"text-capitalize",color:c[k],pill:!0,children:k},k))},M=a=>{const c=a.assignee;return c.avatar===void 0||c.avatar===null?e(U,{img:_e,imgHeight:"32",imgWidth:"32"}):c.avatar!==""?e(U,{img:c.avatar,imgHeight:"32",imgWidth:"32"}):e(U,{color:C(a.tags),content:c.fullName,initials:!0})},P=()=>e(X,{className:"list-group todo-task-list-wrapper",options:{wheelPropagation:!1},containerRef:a=>{a&&(a._getBoundingClientRect=a.getBoundingClientRect,a.getBoundingClientRect=()=>{const c=a._getBoundingClientRect();return{...c,height:Math.floor(c.height)}})},children:n.length?e($e,{tag:"ul",list:n,handle:".drag-icon",className:"todo-task-list media-list",setList:a=>h(o(a)),children:n.map((a,c)=>e("li",{onClick:()=>w(a),className:R("todo-item",{completed:a.isCompleted}),children:t("div",{className:"todo-title-wrapper",children:[t("div",{className:"todo-title-area",children:[e(J,{className:"drag-icon"}),e("div",{className:"form-check",children:e(W,{type:"checkbox",id:a.title,checked:a.isCompleted,onClick:k=>k.stopPropagation(),onChange:k=>{k.stopPropagation(),h(d({...a,isCompleted:k.target.checked}))}})}),e("span",{className:"todo-title",children:a.title})]}),t("div",{className:"todo-item-action mt-lg-0 mt-50",children:[a.tags&&a.tags.length?e("div",{className:"badge-wrapper me-1",children:F(a.tags)}):null,a.dueDate?t("small",{className:"text-nowrap text-muted me-1",children:[new Date(a.dueDate).toLocaleString("default",{month:"short"})," ",new Date(a.dueDate).getDate().toString().padStart(2,"0")]}):null,a.assignee?M(a):null]})]})},`${a.id}-${c}`))}):e("div",{className:"no-results show",children:e("h5",{children:"No Items Found"})})}),B=a=>{N(a.target.value),h(r(s))},y=(a,c)=>{a.preventDefault(),u(c),h(r({...s}))};return t("div",{className:"todo-app-list",children:[t("div",{className:"app-fixed-search d-flex align-items-center",children:[e("div",{className:"sidebar-toggle cursor-pointer d-block d-lg-none ms-1",onClick:T,children:e(Oe,{size:21})}),e("div",{className:"d-flex align-content-center justify-content-between w-100",children:t(he,{className:"input-group-merge",children:[e(ge,{children:e(Pe,{className:"text-muted",size:14})}),e(W,{placeholder:"Search task",value:v,onChange:B})]})}),t(be,{children:[e(ke,{className:"hide-arrow me-1",tag:"a",href:"/",onClick:a=>a.preventDefault(),children:e(J,{className:"text-body",size:16})}),t(fe,{end:!0,children:[e(I,{tag:b,to:"/",onClick:a=>y(a,"title-asc"),children:"Sort A-Z"}),e(I,{tag:b,to:"/",onClick:a=>y(a,"title-desc"),children:"Sort Z-A"}),e(I,{tag:b,to:"/",onClick:a=>y(a,"assignee"),children:"Sort Assignee"}),e(I,{tag:b,to:"/",onClick:a=>y(a,"due-date"),children:"Sort Due Date"}),e(I,{tag:b,to:"/",onClick:a=>y(a,""),children:"Reset Sort"})]})]})]}),P()]})},Qe=p=>{const{handleTaskSidebar:v,setMainSidebar:n,mainSidebar:s,dispatch:u,getTasks:h,params:r}=p,N=m=>{u(h({...r,filter:m}))},d=m=>{u(h({...r,tag:m}))},i=m=>!!(r.filter&&r.filter===m||r.tag&&r.tag===m),o=()=>{v(),n()};return e("div",{className:R("sidebar-left",{show:s===!0}),children:e("div",{className:"sidebar",children:e("div",{className:"sidebar-content todo-sidebar",children:t("div",{className:"todo-app-menu",children:[e("div",{className:"add-task",children:e(z,{color:"primary",onClick:o,block:!0,children:"Add Task"})}),t(X,{className:"sidebar-menu-list",options:{wheelPropagation:!1},children:[t(H,{tag:"div",className:"list-group-filters",children:[t(x,{action:!0,tag:b,to:"/apps/todo/",active:r.filter===""&&r.tag==="",onClick:()=>N(""),children:[e(Re,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"My Tasks"})]}),t(x,{tag:b,to:"/apps/todo/important",active:i("important"),onClick:()=>N("important"),action:!0,children:[e(Y,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Important"})]}),t(x,{tag:b,to:"/apps/todo/completed",active:i("completed"),onClick:()=>N("completed"),action:!0,children:[e(Ee,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Completed"})]}),t(x,{tag:b,to:"/apps/todo/deleted",active:i("deleted"),onClick:()=>N("deleted"),action:!0,children:[e(ee,{className:"me-75",size:18}),e("span",{className:"align-middle",children:"Deleted"})]})]}),t("div",{className:"mt-3 px-2 d-flex justify-content-between",children:[e("h6",{className:"section-label mb-1",children:"Tags"}),e(je,{className:"cursor-pointer",size:14})]}),t(H,{className:"list-group-labels",children:[t(x,{active:i("team"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/team",onClick:()=>d("team"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-primary me-1"}),e("span",{className:"align-middle",children:"Team"})]}),t(x,{active:i("low"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/low",onClick:()=>d("low"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-success me-1"}),e("span",{className:"align-middle",children:"Low"})]}),t(x,{active:i("medium"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/medium",onClick:()=>d("medium"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-warning me-1"}),e("span",{className:"align-middle",children:"Medium"})]}),t(x,{active:i("high"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/high",onClick:()=>d("high"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-danger me-1"}),e("span",{className:"align-middle",children:"High"})]}),t(x,{active:i("update"),className:"d-flex align-items-center",tag:b,to:"/apps/todo/tag/update",onClick:()=>d("update"),action:!0,children:[e("span",{className:"bullet bullet-sm bullet-info me-1"}),e("span",{className:"align-middle",children:"Update"})]})]})]})]})})})})},K=p=>p.charAt(0).toUpperCase()+p.slice(1),Ze=p=>{const{children:v,store:n,handleTaskSidebar:s,setDeleted:u,deleted:h,important:r,setImportant:N,deleteTask:d,dispatch:i}=p,o=()=>{u(!h),i(d(n.selectedTask.id)),s()};return t("div",{className:"modal-header d-flex align-items-center justify-content-between mb-1",children:[e("h5",{className:"modal-title",children:v}),t("div",{className:"todo-item-action d-flex align-items-center",children:[n&&!D(n.selectedTask)?e(ee,{className:"cursor-pointer mt-25",size:16,onClick:()=>o()}):null,e("span",{className:"todo-item-favorite cursor-pointer mx-75",children:e(Y,{size:16,onClick:()=>N(!r),className:R({"text-warning":r===!0})})}),e(Le,{className:"fw-normal mt-25",size:16,onClick:s})]})]})},Ke=p=>{const{open:v,handleTaskSidebar:n,store:s,dispatch:u,updateTask:h,selectTask:r,addTask:N,deleteTask:d}=p,[i,o]=g.exports.useState({value:"pheobe",label:"Pheobe Buffay",img:G}),[m,T]=g.exports.useState([]),[w,C]=g.exports.useState(A.EditorState.createEmpty()),[F,M]=g.exports.useState(!1),[P,B]=g.exports.useState(!1),[y,a]=g.exports.useState(!1),[c,k]=g.exports.useState(new Date),{control:ae,setError:te,setValue:E,clearErrors:se,handleSubmit:le,formState:{errors:j}}=He({defaultValues:{title:""}}),ie=[{value:"pheobe",label:"Pheobe Buffay",img:G},{value:"chandler",label:"Chandler Bing",img:xe},{value:"ross",label:"Ross Geller",img:we},{value:"monica",label:"Monica Geller",img:ye},{value:"joey",label:"Joey Tribbiani",img:De},{value:"Rachel",label:"Rachel Green",img:Ae}],ne=[{value:"team",label:"Team"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"update",label:"Update"}],re=({data:l,...f})=>e(qe.Option,{...f,children:t("div",{className:"d-flex align-items-center",children:[e("img",{className:"d-block rounded-circle me-50",src:l.img,height:"26",width:"26",alt:l.label}),e("p",{className:"mb-0",children:l.label})]})}),oe=()=>s&&!D(s.selectedTask)?e(z,{outline:!0,size:"sm",onClick:()=>M(!F),color:F===!0?"success":"secondary",children:F===!0?"Completed":"Mark Complete"}):"Add Task",ce=()=>{const{selectedTask:l}=s;if(!D(l)){if(E("title",l.title),M(l.isCompleted),B(l.isImportant),o([{value:l.assignee.fullName,label:l.assignee.fullName,img:l.assignee.avatar}]),k(l.dueDate),typeof l.description=="string")C(A.EditorState.createWithContent(A.ContentState.createFromText(l.description)));else{const f=l.description._immutable.currentContent.blockMap,S=Object.keys(f).map(L=>L);C(A.EditorState.createWithContent(A.ContentState.createFromText(f[S].text)))}if(l.tags.length){const f=[];l.tags.map(S=>{f.push({value:S,label:K(S)})}),T(f)}}},de=()=>{T([]),C(""),E("title",""),o({value:"pheobe",label:"Pheobe Buffay",img:G}),M(!1),B(!1),k(new Date),u(r({})),se()},me=()=>{const l=A.EditorState.createWithContent(A.ContentState.createFromText(s.selectedTask.description));if(E("title",s.selectedTask.title),C(l),M(s.selectedTask.isCompleted),B(s.selectedTask.isImportant),a(s.selectedTask.isDeleted),k(s.selectedTask.dueDate),s.selectedTask.assignee.fullName!==i.label&&o({value:s.selectedTask.assignee.fullName,label:s.selectedTask.assignee.fullName,img:s.selectedTask.assignee.avatar}),s.selectedTask.tags.length){const f=[];s.selectedTask.tags.map(S=>{f.push({value:S,label:K(S)})}),T(f)}},pe=()=>s&&!D(s.selectedTask)?t(g.exports.Fragment,{children:[e(z,{color:"primary",className:"update-btn update-todo-item me-1",children:"Update"}),e(z,{color:"secondary",onClick:me,outline:!0,children:"Reset"})]}):t(g.exports.Fragment,{children:[e(z,{color:"primary",className:"add-todo-item me-1",children:"Add"}),e(z,{color:"secondary",onClick:n,outline:!0,children:"Cancel"})]});return e(ve,{isOpen:v,toggle:n,className:"sidebar-lg",contentClassName:"p-0",onOpened:ce,onClosed:de,modalClassName:"modal-slide-in sidebar-todo-modal",children:t(Te,{id:"form-modal-todo",className:"todo-modal",onSubmit:le(l=>{const f=[],S=!D(s.selectedTask)&&i.label===s.selectedTask.assignee.fullName;m.length&&m.map(ue=>f.push(ue.value));const L={fullName:i.label,avatar:i.img},q={dueDate:c,title:l.title,tags:f,description:w,isCompleted:F,isDeleted:y,isImportant:P,assignee:S||i.label===void 0?s.selectedTask.assignee:L};l.title.length?D(j)&&(D(s.selectedTask)||!D(s.selectedTask)&&!s.selectedTask.title.length?u(N(q)):u(h({...q,id:s.selectedTask.id})),n()):te("title",{type:"manual"})}),children:[e(Ze,{store:s,deleted:y,dispatch:u,important:P,deleteTask:d,setDeleted:a,setImportant:B,handleTaskSidebar:n,children:oe()}),t(Ce,{className:"flex-grow-1 pb-sm-0 pb-3",children:[t("div",{className:"mb-1",children:[t(O,{className:"form-label",for:"task-title",children:["Title ",e("span",{className:"text-danger",children:"*"})]}),e(Ve,{name:"title",control:ae,render:({field:l})=>e(W,{id:"task-title",placeholder:"Title",className:"new-todo-item-title",invalid:j.title&&!0,...l})}),j.title&&e(Se,{children:"Please enter a valid task title"})]}),t("div",{className:"mb-1",children:[e(O,{className:"form-label",for:"task-assignee",children:"Assignee"}),e(Z,{id:"task-assignee",className:"react-select",classNamePrefix:"select",isClearable:!1,options:ie,theme:Q,value:i,onChange:l=>o(l),components:{Option:re}})]}),t("div",{className:"mb-1",children:[e(O,{className:"form-label",for:"due-date",children:"Due Date"}),e(Ue,{id:"due-date",name:"due-date",className:"form-control",onChange:l=>k(l[0]),value:c,options:{dateFormat:"Y-m-d"}})]}),t("div",{className:"mb-1",children:[e(O,{className:"form-label",for:"task-tags",children:"Tags"}),e(Z,{isMulti:!0,id:"task-tags",className:"react-select",classNamePrefix:"select",isClearable:!1,options:ne,theme:Q,value:m,onChange:l=>{T(l!==null?[...l]:[])}})]}),t("div",{className:"mb-1",children:[e(O,{for:"task-desc",className:"form-label",children:"Description"}),e(We.exports.Editor,{editorState:w,wrapperClassName:"toolbar-bottom",toolbar:{options:["inline","textAlign"],inline:{inDropdown:!1,options:["bold","italic","underline"]}},onEditorStateChange:l=>C(l)})]}),e("div",{children:pe()})]})]})})};const oa=()=>{const[p,v]=g.exports.useState(""),[n,s]=g.exports.useState(""),[u,h]=g.exports.useState(!1),[r,N]=g.exports.useState(!1),d=Ge(),i=Fe(C=>C.todo),o=Me(),m={filter:o.filter||"",q:n||"",sortBy:p||"",tag:o.tag||""},T=()=>h(!u),w=()=>N(!r);return g.exports.useEffect(()=>{d($({filter:o.filter||"",q:n||"",sortBy:p||"",tag:o.tag||""}))},[i.tasks.length,o.filter,o.tag,n,p]),t(g.exports.Fragment,{children:[e(Qe,{store:i,params:m,getTasks:$,dispatch:d,mainSidebar:u,urlFilter:o.filter,setMainSidebar:h,handleTaskSidebar:w}),e("div",{className:"content-right",children:e("div",{className:"content-wrapper",children:t("div",{className:"content-body",children:[e("div",{className:R("body-content-overlay",{show:u===!0}),onClick:T}),i?e(Je,{store:i,tasks:i.tasks,sort:p,query:n,params:m,setSort:v,setQuery:s,dispatch:d,getTasks:$,paramsURL:o,updateTask:V,selectTask:_,reOrderTasks:Be,handleMainSidebar:T,handleTaskSidebar:w}):null,e(Ke,{store:i,params:m,addTask:ze,dispatch:d,open:r,updateTask:V,selectTask:_,deleteTask:Ie,handleTaskSidebar:w})]})})})]})};export{oa as default};
